name: 🧪 Test Suite

on: [pull_request]

permissions:
  contents: read

jobs:
  # This workflow orchestrates all test jobs
  # Individual test jobs are defined in separate files for better maintainability
  
  check-workflows:
    name: 📋 Validate Workflow Files
    runs-on: ubuntu-latest
    steps:
      - name: "📦 Checkout ${{ github.ref }} ( ${{ github.sha }} )"
        uses: actions/checkout@v5
      
      - name: ✅ Check workflow syntax
        run: |
          echo "🔍 Validating workflow files..."
          for file in .github/workflows/*.yml .github/workflows/*.yaml; do
            if [ -f "$file" ]; then
              echo "Checking $file"
              # Basic YAML syntax check
              python -c "import yaml; yaml.safe_load(open('$file'))" || exit 1
            fi
          done
          echo "✅ All workflow files are valid!"

  # Reference other test jobs (they run independently via their own triggers)
  test-summary:
    name: 📊 Test Summary
    runs-on: ubuntu-latest
    needs: [check-workflows]
    if: always()
    steps:
      - name: 📋 Test Results Summary
        run: |
          echo "🧪 Test Suite Overview:"
          echo "├── 🚀 Bun Tests: Defined in bun.yml"
          echo "├── 📝 Pre-commit Checks: Defined in pre-commit.yml"
          echo "├── 📂 Git Clone Tests: Defined in test-git-clone.yml"
          echo "└── 🌐 Deploy: Defined in deploy.yml"
          echo ""
          echo "✅ All workflow files are properly configured!"
          echo "📋 Individual test results are tracked in their respective workflows."